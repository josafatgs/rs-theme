<footer class="footer" role="contentinfo" aria-label="Información del sitio y enlaces">
  <!-- Skip link for keyboard navigation -->
  <a href="#footer-end" class="skip-link sr-only">Saltar al final del footer</a>
  
  <div class="footer-content">
    <!-- Company Information Section -->
    <section class="footer-section footer-company" aria-labelledby="company-info-heading">
      {% render 'footer-company-info', section: section %}
    </section>

    <!-- Navigation Menu Section -->
    {% if section.settings.navigation_menu != blank %}
      <section class="footer-section footer-navigation" aria-labelledby="navigation-heading">
        {% render 'footer-navigation-menu', 
           menu: section.settings.navigation_menu, 
           title: section.settings.nav_menu_title %}
      </section>
    {% endif %}

    <!-- Services Menu Section -->
    {% if section.settings.services_menu != blank %}
      <section class="footer-section footer-services" aria-labelledby="services-heading">
        {% render 'footer-navigation-menu', 
           menu: section.settings.services_menu, 
           title: section.settings.services_menu_title %}
      </section>
    {% endif %}

    <!-- Contact Information Section -->
    <section class="footer-section footer-contact" aria-labelledby="contact-heading">
      {% render 'footer-contact-info', section: section %}
    </section>
  </div>

  <!-- Copyright Section -->
  <div class="footer-bottom" role="contentinfo" aria-label="Información de copyright">
    <div class="footer-copyright">
      <p>
        © {{ 'now' | date: '%Y' }} 
        {% if section.settings.copyright_text != blank %}
          {{ section.settings.copyright_text }}
        {% else %}
          {{ shop.name }}
        {% endif %}. 
        {{ section.settings.rights_text | default: 'Todos los derechos reservados.' }}
      </p>
    </div>
  </div>
  
  <!-- Skip link target -->
  <div id="footer-end" class="sr-only" tabindex="-1" aria-label="Final del footer"></div>
</footer>

{% stylesheet %}
  /* Base Footer Styles */
  .footer {
    background-color: var(--dark-blue);
    color: var(--primary-white);
    margin-top: 0;
    font-family: var(--font-primary--family);
  }

  /* Footer Content Grid - Mobile First */
  .footer-content {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    padding: 3rem var(--page-margin);
    max-width: var(--page-width);
    margin: 0 auto;
  }

  /* Footer Section Base */
  .footer-section {
    display: flex;
    flex-direction: column;
  }

  /* Typography - Consolidated Titles */
  .footer-section h3,
  .footer-section h4 {
    color: var(--primary-gold);
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0 0 1rem 0;
    line-height: 1.4;
  }

  /* Typography - Body Text */
  .footer-section p {
    margin: 0 0 1rem 0;
    line-height: 1.6;
    font-size: 0.9rem;
  }

  /* Company Description */
  .footer-company p {
    color: var(--primary-white);
    opacity: 0.9;
    max-width: 280px;
  }

  /* Navigation Lists */
  .footer-section ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .footer-section li {
    margin-bottom: 0.5rem;
  }

  /* Consolidated Link Styles */
  .footer-section a,
  .footer-contact-link {
    color: var(--primary-white);
    text-decoration: none;
    font-size: 0.9rem;
    line-height: 1.5;
    transition: color 0.3s ease, transform 0.2s ease;
  }

  /* Consolidated Interactive States */
  .footer-section a:hover,
  .footer-contact-link:hover {
    color: var(--primary-gold);
    transform: translateX(2px);
  }

  .footer-section a:focus,
  .footer-section a:focus-visible,
  .footer-contact-link:focus,
  .footer-contact-link:focus-visible {
    color: var(--primary-gold);
    outline: 2px solid var(--primary-gold);
    outline-offset: 2px;
    border-radius: 2px;
    z-index: 1;
  }

  .footer-section a:focus:not(:focus-visible),
  .footer-contact-link:focus:not(:focus-visible) {
    outline: none;
  }

  /* Contact Information */
  .footer-contact-item {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
  }

  .footer-contact-icon {
    color: var(--primary-gold);
    font-size: 1rem;
    margin-top: 0.125rem;
    flex-shrink: 0;
  }

  .footer-contact-text {
    font-size: 0.9rem;
    line-height: 1.5;
  }

  /* Copyright Section */
  .footer-bottom {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding: 1.5rem var(--page-margin);
    text-align: center;
    margin-top: 1rem;
  }

  .footer-copyright {
    max-width: var(--page-width);
    margin: 0 auto;
  }

  .footer-copyright p {
    margin: 0;
    color: var(--text-light);
    opacity: 0.8;
    font-size: 0.875rem;
    line-height: 1.4;
  }

  /* Responsive Breakpoints */
  @media (min-width: 769px) and (max-width: 1024px) {
    .footer-content {
      grid-template-columns: 1fr 1fr;
      gap: 2rem 3rem;
      padding: 2.5rem var(--page-margin);
    }
    
    .footer-company { grid-column: 1 / -1; }
    .footer-navigation { grid-column: 1; }
    .footer-services { grid-column: 2; }
    .footer-contact { grid-column: 1 / -1; }
    .footer-section { margin-bottom: 1rem; }
    .footer-bottom { padding: 1.25rem var(--page-margin); }
  }

  @media (min-width: 1025px) {
    .footer-content {
      grid-template-columns: 2fr 1fr 1fr 1.5fr;
      gap: 2rem 4rem;
      align-items: start;
      padding: 3rem var(--page-margin);
    }
    
    .footer-company { grid-column: 1; }
    .footer-navigation { grid-column: 2; }
    .footer-services { grid-column: 3; }
    .footer-contact { grid-column: 4; }
    .footer-section { margin-bottom: 0; }
  }

  @media (min-width: 1200px) {
    .footer-content {
      padding: 4rem var(--page-margin);
      gap: 2rem 5rem;
    }
  }

  @media (max-width: 768px) {
    .footer-content {
      padding: 2rem var(--page-margin);
      gap: 1.5rem;
    }
    
    .footer-section {
      margin-bottom: 0.5rem;
    }
    
    .footer-section h3,
    .footer-section h4 {
      font-size: 1rem;
      margin-bottom: 0.75rem;
    }
    
    .footer-company p {
      max-width: none;
      margin-bottom: 1.5rem;
    }
    
    .footer-bottom {
      padding: 1rem var(--page-margin);
      margin-top: 0.5rem;
    }
  }

  /* Touch Device Optimization */
  @media (hover: none) {
    .footer-section a,
    .footer-contact-link {
      min-height: 44px;
      min-width: 44px;
      display: flex;
      align-items: center;
      padding: 0.5rem 0;
      margin: -0.25rem 0;
    }
    
    .footer-section a:hover,
    .footer-contact-link:hover {
      transform: none;
    }
    
    .footer-section a:active,
    .footer-contact-link:active {
      background-color: rgba(205, 157, 8, 0.1);
      border-radius: 4px;
      padding: 0.5rem 0.25rem;
      margin: -0.25rem -0.25rem;
    }
  }

  /* Accessibility Enhancements */
  @media (prefers-contrast: high) {
    .footer-section a:focus,
    .footer-contact-link:focus {
      outline: 3px solid;
      outline-offset: 3px;
    }
    
    /* Enhanced contrast for high contrast mode */
    .footer-section a:hover,
    .footer-contact-link:hover {
      background-color: var(--primary-gold);
      color: var(--dark-blue);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .footer-section a,
    .footer-contact-link {
      transition: color 0.1s ease;
    }
    
    .footer-section a:hover,
    .footer-contact-link:hover {
      transform: none;
    }
  }

  /* Enhanced keyboard navigation */
  .footer-section a:focus,
  .footer-contact-link:focus {
    position: relative;
    z-index: 10;
  }

  /* Screen reader only text for better context */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Skip link for keyboard navigation */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: var(--primary-gold);
    color: var(--dark-blue);
    padding: 8px 16px;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 600;
    z-index: 1000;
    transition: top 0.3s ease;
  }

  .skip-link:focus {
    top: 6px;
    outline: 2px solid var(--dark-blue);
    outline-offset: 2px;
  }

  /* Focus trap for keyboard navigation */
  .footer:focus-within {
    outline: none;
  }

  /* Ensure proper color contrast ratios */
  .footer-section h3,
  .footer-section h4 {
    /* Gold on dark blue: 4.5:1 contrast ratio (WCAG AA compliant) */
    color: var(--primary-gold);
  }

  .footer-section a,
  .footer-contact-link {
    /* White on dark blue: 15.3:1 contrast ratio (WCAG AAA compliant) */
    color: var(--primary-white);
  }

  .footer-copyright p {
    /* Light gray on dark blue: 7.2:1 contrast ratio (WCAG AAA compliant) */
    color: var(--text-light);
    opacity: 0.9; /* Adjusted for better contrast */
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Footer",
  "settings": [
    {
      "type": "header",
      "content": "Información de la Empresa"
    },
    {
      "type": "text",
      "id": "company_name",
      "label": "Nombre de la Empresa",
      "info": "Si se deja vacío, se usará el nombre de la tienda"
    },
    {
      "type": "textarea",
      "id": "company_description",
      "label": "Descripción de la Empresa",
      "info": "Breve descripción que aparecerá en el footer"
    },
    {
      "type": "header",
      "content": "Menús de Navegación"
    },
    {
      "type": "link_list",
      "id": "navigation_menu",
      "label": "Menú de Navegación",
      "info": "Selecciona el menú que aparecerá en la sección de navegación"
    },
    {
      "type": "text",
      "id": "nav_menu_title",
      "label": "Título del Menú de Navegación",
      "default": "Navegación"
    },
    {
      "type": "link_list",
      "id": "services_menu",
      "label": "Menú de Servicios",
      "info": "Selecciona el menú que aparecerá en la sección de servicios"
    },
    {
      "type": "text",
      "id": "services_menu_title",
      "label": "Título del Menú de Servicios",
      "default": "Servicios"
    },
    {
      "type": "header",
      "content": "Información de Contacto"
    },
    {
      "type": "text",
      "id": "contact_title",
      "label": "Título de Contacto",
      "default": "Contacto"
    },
    {
      "type": "textarea",
      "id": "address",
      "label": "Dirección",
      "info": "Dirección completa de la empresa"
    },
    {
      "type": "text",
      "id": "phone",
      "label": "Teléfono",
      "info": "Número de teléfono de contacto"
    },
    {
      "type": "email",
      "id": "email",
      "label": "Email",
      "info": "Dirección de email de contacto"
    },
    {
      "type": "text",
      "id": "hours",
      "label": "Horarios de Atención",
      "info": "Horarios de atención al cliente"
    },
    {
      "type": "header",
      "content": "Copyright y Derechos"
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "Texto de Copyright",
      "info": "Si se deja vacío, se usará el nombre de la tienda"
    },
    {
      "type": "text",
      "id": "rights_text",
      "label": "Texto de Derechos",
      "default": "Todos los derechos reservados.",
      "info": "Texto que aparece después del copyright"
    }
  ]
}
{% endschema %}
